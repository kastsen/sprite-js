/*
 * Sprite - 1.0.1
 * https://github.com/antonjb/Sprite
 * Anton Ball
 * MIT license
 * @license
 */
!function(e){"use strict";var n=function(){},i=function(){var e,n,i,t="object"==typeof arguments[0]?arguments[0]:{},a=arguments.length;for(e=0;e<a;e+=1)if(null!==(n=arguments[e]))for(i in n)t[i]=n[i];return t},t=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};!function(){for(var e=0,n=["ms","moz","webkit","o"],i=0;i<n.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[n[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[i]+"CancelAnimationFrame"]||window[n[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var i=(new Date).getTime(),t=Math.max(0,16-(i-e)),a=window.setTimeout((function(){n(i+t)}),t);return e=i+t,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var a=function(e,o,r){var m,s,u,w=!1,l=0;this.el=e,this.options=i({},a.defaults,r);var c,f=Math.floor(r.imageWidth/o.width),h=Math.floor(r.imageHeight/o.height);this.numFrames=o.length?o.length:f*h,c=o,s="[object Array]"!==Object.prototype.toString.call(c)?function(e,n,i,t){for(var a=[],o=0;o<n;o+=1){var r=o%i*e.width,m=Math.floor(o/i)*e.height;a.push([r,m,e.width,e.height])}return a}(o,this.numFrames,f):o,m=i({},this.options);var d=function(e){this.el.style.backgroundPosition=-e[0]+"px "+-e[1]+"px"};this.isPlaying=function(){return w},this.frame=function(e){return t(e)&&l!==e&&(l=e<this.numFrames?e:l,d.call(this,s[l])),l},this.play=function(e){if(w)return this;var t=i({onComplete:n,onFrame:n},this.options,e),a=this,o=0;0,l=this.frame(t.from||l),m=i({},t);return w=!0,u=function(e,n){if(!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame))return window.setInterval(e,n);var i=(new Date).getTime(),t={};return t.value=requestAnimationFrame((function a(){t.value=requestAnimationFrame(a),(new Date).getTime()-i>=n&&(e.call(),i=(new Date).getTime())})),t}((function(){l=(t.reverse?a.numFrames+(l-1):l+1)%a.numFrames,d.call(a,s[l]),t.onFrame.call(a,l,o),l===(t.from||0)&&(o+=1,t.loop&&o!==t.loop||(a.stop(),t.onComplete.call(a))),1}),1e3/t.fps),this},this.stop=function(e){var a,o=this;return w?((e=i({onComplete:n,frame:l,animated:!1},e)).frame=t(e.frame)?e.frame:l,a=u,window.cancelAnimationFrame?window.cancelAnimationFrame(a.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(a.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(a.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(a.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(a.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(a.value):window.clearInterval(a),w=!1,e.animated?this.play({reverse:m.reverse,fps:m.fps,onFrame:function(n){e.frame===n&&o.stop({onComplete:e.onComplete})}}):(this.frame(e.frame),e.onComplete.call(this)),this):this}};a.toString=function(){return"Sprite version "+this.version},a.version="1.0.2",a.defaults={fps:12,loop:!0,reverse:!1},e.Sprite=a}(this);
